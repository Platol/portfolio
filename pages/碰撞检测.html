<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<link rel="icon" href="../img/ico.ico">
<link rel="stylesheet" href="../css/css.css">
<script src="../js/js.js"></script>
<style>
	div {
		width: 100px; height: 100px; position: absolute;
	}
	#div1 {
		left: 0; top: 0; background: #faf;
	}
	#div2 {
		left: 400px; top: 400px; background: #afa;
	}
</style>
</head>

<body>
<div id="div1"></div>
<div id="div2"></div>

<script>
(function(){
	var oDiv1=document.getElementById('div1');
	var oDiv2=document.getElementById('div2');
	
	fn(oDiv1, oDiv2);
	fn(oDiv2, oDiv1);
	
	
	//碰撞检测函数：
	function fn( obj1, obj2 ){
		obj1.onmousedown=function( ev ){
			var ev = ev || event;

			var disX = ev.clientX - this.offsetLeft;
			var disY = ev.clientY - this.offsetTop;

			if( obj1.setCapture ){
				obj1.setCapture();
			}

			document.onmousemove=function( ev ){
				var ev = ev || event;

				var L = ev.clientX - disX;
				var T = ev.clientY - disY;

				var L1=L;
				var R1=L1+obj1.offsetWidth;
				var T1=T;
				var B1=T1+obj1.offsetHeight;

				var L2=obj2.offsetLeft;
				var R2=L2+obj2.offsetWidth;
				var T2=obj2.offsetTop;
				var B2=T2+obj2.offsetHeight;
				
				if( R1 < L2 || L1 > R2 || B1 < T2 || T1 > B2 ){
					obj2.style.background = '';
				} else {
					obj2.style.background = 'red';
				}

				obj1.style.left = L + 'px';
				obj1.style.top = T + 'px';
			}

			document.onmouseup=function(){

				document.onmousemove = document.onmouseup = null;

				if( obj1.releaseCapture ){
					obj1.releaseCapture();
				}
			}

			return false;
		}
	}
})();
</script>
</body>
</html>